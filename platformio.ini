[env:black_f407vg]
platform        = ststm32
board           = black_f407vg
framework       = stm32cube
extra_scripts   = pre:extra_script.py
debug_speed     = 3000
; Extra libraries to be linked
lib_deps = 
    Unity
    Semihosting
    spi_ll
    tinyusb
build_flags = 
    ; Generate linker map in firmware.map and show memory usage.
    -Wl,-Map,firmware.map,--print-memory-usage
    -g
    -O0
    -D CFG_TUSB_MCU=304
    -D FAMILY=stm32f4
    !python pre_script.py
build_unflags =
    --specs=nosys.specs 
    -lnosys
    -Os

debug_port      = /dev/ttyACM0
upload_port     = /dev/ttyACM0
debug_tool      = blackmagic
upload_protocol = blackmagic

[platformio]
include_dir = Inc
src_dir = Src
